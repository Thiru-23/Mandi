{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\uriht\\\\OneDrive\\\\Desktop\\\\DigitalMandi-main\\\\src\\\\Components\\\\CurrentBidCard.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { useContext, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport noteContext from \"../Context/Crops/CropContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const CurrentBidCard = props => {\n  _s();\n\n  const context = useContext(noteContext);\n  const [value, setValue] = useState(\"\");\n  const [high, setHigh] = useState(\"0\");\n  let history = useHistory();\n  const {\n    crop\n  } = props;\n  let date = crop.date;\n\n  const onChange = e => {\n    setValue(e.target.value);\n    console.log(e.target.value);\n  };\n  /*  const price = value; */\n\n\n  const handleClick = async () => {\n    console.log(crop._id);\n    console.log(value);\n    const price = value;\n    const response = await fetch(`${process.env.REACT_APP_BACKEND_URL}/api/buy/merchant/highbid/${crop._id}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        auth: localStorage.getItem(\"token\")\n      },\n      body: JSON.stringify({\n        price\n      })\n    });\n    const note = await response.json();\n    console.log(response.status);\n\n    if (response.status === 200) {\n      window.alert(\"Bid successfully\");\n      history.push(\"/merchantdashboard\");\n    } else {\n      window.alert(note);\n      history.push(\"/mcurrent\");\n      setValue(0);\n    }\n  };\n\n  const higheat = async () => {\n    const resp = await fetch(`${process.env.REACT_APP_BACKEND_URL}/api/buy/merchant/highestprice/${crop._id}`, {\n      method: \"GET\"\n    });\n    const rate = await resp.json();\n    setHigh(rate.highest);\n\n    if (resp.status !== 200) {\n      window.alert(rate);\n      history.push(\"/buycrop\");\n    }\n  };\n\n  higheat();\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      class: \"\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"container py-2\",\n        children: /*#__PURE__*/_jsxDEV(\"article\", {\n          class: \"postcard light blue\",\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            class: \"postcard__img_link\",\n            href: \"#\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              class: \"postcard__img\",\n              src: `${crop.image}`,\n              alt: \"Crop Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"postcard__text t-dark\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              class: \"postcard__title blue\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"postcard__subtitle  \",\n              children: /*#__PURE__*/_jsxDEV(\"time\", {\n                datetime: \"2020-05-25 12:00:00 \",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  class: \"fas fa-calendar-alt my-4 mx-1 \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 82,\n                  columnNumber: 19\n                }, this), new Date(date).toUTCString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"postcard__preview-txt\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Crop: \", crop.cropName]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Address: \", crop.address, \" \\u2003 \\u2003 Market:\", crop.market]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Plot No.: \", crop.plotno, \" \\u2003 \\u2003 Net weight:\", crop.weight]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Highest Bid : \", high]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Your Bid:\", crop.price]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Update Bid Amount:\", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  onChange: onChange,\n                  className: \" mx-4\",\n                  id: \"price\",\n                  name: \"price\",\n                  value: value // placeholder=\"00\"\n\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-lg btn-success btn-login fw-bold text-uppercase\",\n              type: \"submit\",\n              onClick: handleClick,\n              children: \"Update Bid\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(CurrentBidCard, \"zWUdhBVqwvdnwWjG/yeW7euIATA=\", false, function () {\n  return [useHistory];\n});\n\n_c = CurrentBidCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"CurrentBidCard\");","map":{"version":3,"sources":["C:/Users/uriht/OneDrive/Desktop/DigitalMandi-main/src/Components/CurrentBidCard.js"],"names":["React","useContext","useState","useHistory","noteContext","CurrentBidCard","props","context","value","setValue","high","setHigh","history","crop","date","onChange","e","target","console","log","handleClick","_id","price","response","fetch","process","env","REACT_APP_BACKEND_URL","method","headers","auth","localStorage","getItem","body","JSON","stringify","note","json","status","window","alert","push","higheat","resp","rate","highest","image","Date","toUTCString","cropName","address","market","plotno","weight"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useContext, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport noteContext from \"../Context/Crops/CropContext\";\n\nexport const CurrentBidCard = (props) => {\n  const context = useContext(noteContext);\n\n  const [value, setValue] = useState(\"\");\n  const [high, setHigh] = useState(\"0\");\n  let history = useHistory();\n  const { crop } = props;\n  let date = crop.date;\n  const onChange = (e) => {\n    setValue(e.target.value);\n    console.log(e.target.value);\n  };\n /*  const price = value; */\n  const handleClick = async () => {\n   \n    console.log(crop._id);\n    console.log(value);\n    const price = value;\n    const response = await fetch(`${process.env.REACT_APP_BACKEND_URL}/api/buy/merchant/highbid/${crop._id}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        auth: localStorage.getItem(\"token\"),\n      },\n      body: JSON.stringify({ price }),\n    });\n\n    const note = await response.json();\n    console.log(response.status);\n    if (response.status === 200) {\n      window.alert(\"Bid successfully\");\n      history.push(\"/merchantdashboard\");\n    } else {\n      window.alert(note);\n      history.push(\"/mcurrent\");\n      setValue(0);\n    }\n  };\n\n  const higheat =async ()=> {\n    const resp= await fetch(`${process.env.REACT_APP_BACKEND_URL}/api/buy/merchant/highestprice/${crop._id}`, {\n    method: \"GET\",\n    \n  });\n  \nconst rate = await resp.json();\n\nsetHigh(rate.highest);\n\n  \n  if (resp.status !== 200) {\n    window.alert(rate);\n    history.push(\"/buycrop\");\n  }\n};\n\nhigheat();\n\n  return (\n    <>\n      <section class=\"\">\n        <div class=\"container py-2\">\n          <article class=\"postcard light blue\">\n            <a class=\"postcard__img_link\" href=\"#\">\n              <img\n                class=\"postcard__img\"\n                src={`${crop.image}`}\n                alt=\"Crop Image\"\n              />\n            </a>\n            <div class=\"postcard__text t-dark\">\n              <h1 class=\"postcard__title blue\">\n                {/* <a href=\"#\">Podcast Title</a> */}\n              </h1>\n              <div class=\"postcard__subtitle  \">\n                <time datetime=\"2020-05-25 12:00:00 \">\n                  <i\n                    class=\"fas fa-calendar-alt my-4 mx-1\n                \"\n                  ></i>\n                  {new Date(date).toUTCString()}\n                </time>\n              </div>\n\n              <div class=\"postcard__preview-txt\">\n                <p>Crop: {crop.cropName}</p>\n                <p>\n                  Address: {crop.address} &emsp; &emsp; Market:{crop.market}\n                </p>\n\n                <p>\n                  Plot No.: {crop.plotno} &emsp; &emsp; Net weight:{crop.weight}\n                </p>\n                <p>Highest Bid : {high}</p>\n                <p>Your Bid:{crop.price}</p>\n                <p>\n                  Update Bid Amount:\n                  <input\n                    type=\"number\"\n                    onChange={onChange}\n                    className=\" mx-4\"\n                    id=\"price\"\n                    name=\"price\"\n                    value={value}\n                    // placeholder=\"00\"\n                  />\n                </p>\n                \n              </div>\n              <button\n                className=\"btn btn-lg btn-success btn-login fw-bold text-uppercase\"\n                type=\"submit\"\n                onClick={handleClick}\n              >\n                Update Bid\n              </button>\n            </div>\n          </article>\n        </div>\n      </section>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}