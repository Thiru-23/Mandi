{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\uriht\\\\OneDrive\\\\Desktop\\\\DigitalMandi-main\\\\src\\\\Components\\\\BuyCard.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { useContext, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport noteContext from \"../Context/Crops/CropContext\"; // import cropimg from \"../../Backend/images/\"\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst BuyCard = props => {\n  _s();\n\n  const context = useContext(noteContext);\n  const {\n    bidCrop\n  } = context;\n  const [value, setValue] = useState(\"\");\n  const [high, setHigh] = useState(\"\");\n  let history = useHistory();\n  const {\n    crop\n  } = props;\n  let date = crop.date;\n\n  const onChange = e => {\n    setValue(e.target.value);\n    console.log(e.target.value);\n  };\n\n  const handleClick = async () => {\n    console.log(crop._id);\n    console.log(value);\n    const price = value;\n    const response = await fetch(`${process.env.REACT_APP_BACKEND_URL}/api/buy/merchant/list/${crop._id}`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        auth: localStorage.getItem(\"token\")\n      },\n      body: JSON.stringify({\n        price\n      })\n    });\n    const note = await response.json();\n    console.log(response.status);\n\n    if (response.status === 200) {\n      window.alert(\"Bid successfully\");\n      history.push(\"/mcurrent\");\n    } else {\n      window.alert(note);\n      history.push(\"/mcurrent\");\n      setValue(0);\n    }\n  };\n\n  const higheat = async () => {\n    const resp = await fetch(`${process.env.REACT_APP_BACKEND_URL}/api/buy/merchant/highestprice/${crop._id}`, {\n      method: \"GET\"\n    });\n    const rate = await resp.json();\n    setHigh(rate.highest);\n\n    if (resp.status !== 200) {\n      window.alert(rate);\n      history.push(\"/buycrop\");\n    }\n  };\n\n  higheat();\n  /* console.log(rate.highest); */\n\n  console.log(high);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    class: \"\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"container py-2\",\n      children: /*#__PURE__*/_jsxDEV(\"article\", {\n        class: \"postcard light blue\",\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          class: \"postcard__img_link\",\n          href: \"#\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            class: \"postcard__img\",\n            src: `${crop.image}`,\n            alt: \"Crop Image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"postcard__text t-dark\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            class: \"postcard__title blue\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"postcard__subtitle  \",\n            children: /*#__PURE__*/_jsxDEV(\"time\", {\n              datetime: \"2020-05-25 12:00:00 \",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                class: \"fas fa-calendar-alt my-4 mx-1 \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 17\n              }, this), new Date(date).toGMTString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"postcard__preview-txt\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Crop: \", crop.cropName]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Address: \", crop.address]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\" Market:\", crop.market]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Plot No.: \", crop.plotno, \" \\u2003 \\u2003 Net weight:\", crop.weight]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 15\n            }, this), console.log(high), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Highest-bid: \", high]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Enter Bid Amount:\", /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                onChange: onChange,\n                className: \" mx-4\",\n                id: \"price\",\n                name: \"price\",\n                value: value,\n                placeholder: \"00\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-lg btn-success btn-login fw-bold text-uppercase\",\n            type: \"submit\",\n            onClick: handleClick,\n            children: \"Bid\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n\n_s(BuyCard, \"xFC17jMghlXPHH5L6ywSU7xxng4=\", false, function () {\n  return [useHistory];\n});\n\n_c = BuyCard;\nexport default BuyCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"BuyCard\");","map":{"version":3,"sources":["C:/Users/uriht/OneDrive/Desktop/DigitalMandi-main/src/Components/BuyCard.js"],"names":["React","useContext","useState","useHistory","noteContext","BuyCard","props","context","bidCrop","value","setValue","high","setHigh","history","crop","date","onChange","e","target","console","log","handleClick","_id","price","response","fetch","process","env","REACT_APP_BACKEND_URL","method","headers","auth","localStorage","getItem","body","JSON","stringify","note","json","status","window","alert","push","higheat","resp","rate","highest","image","Date","toGMTString","cropName","address","market","plotno","weight"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useContext, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport noteContext from \"../Context/Crops/CropContext\";\n// import cropimg from \"../../Backend/images/\"\nconst BuyCard = (props) => {\n  const context = useContext(noteContext);\n  const { bidCrop } = context;\n  const [value, setValue] = useState(\"\");\n  const [high, setHigh] = useState(\"\");\n  let history = useHistory();\n  const { crop } = props;\n  let date = crop.date;\n  const onChange = (e) => {\n    setValue(e.target.value);\n    console.log(e.target.value);\n  };\n  const handleClick = async () => {\n   \n    console.log(crop._id);\n    console.log(value);\n    const price = value;\n    const response = await fetch(`${process.env.REACT_APP_BACKEND_URL}/api/buy/merchant/list/${crop._id}`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        auth: localStorage.getItem(\"token\"),\n      },\n      body: JSON.stringify({ price }),\n    });\n\n    const note = await response.json();\n    console.log(response.status);\n    if (response.status === 200) {\n      window.alert(\"Bid successfully\");\n      history.push(\"/mcurrent\");\n    } else {\n      window.alert(note);\n      history.push(\"/mcurrent\");\n      setValue(0);\n    }\n  };\n\n  const higheat =async ()=> {\n    const resp= await fetch(`${process.env.REACT_APP_BACKEND_URL}/api/buy/merchant/highestprice/${crop._id}`, {\n    method: \"GET\",\n    \n  });\n  \nconst rate = await resp.json();\n\nsetHigh(rate.highest);\n\n  \n  if (resp.status !== 200) {\n    window.alert(rate);\n    history.push(\"/buycrop\");\n  }\n};\n\n higheat(); \n/* console.log(rate.highest); */\nconsole.log(high);\n  return (\n    \n    <section class=\"\">\n      <div class=\"container py-2\">\n        {/* <div class=\"h1 text-center text-dark\" id=\"pageHeaderTitle\">\n          My Cards Light\n        </div> */}\n\n        <article class=\"postcard light blue\">\n          <a class=\"postcard__img_link\" href=\"#\">\n            <img\n              class=\"postcard__img\"\n              src={`${crop.image}`}\n              alt=\"Crop Image\"\n            />\n          </a>\n          <div class=\"postcard__text t-dark\">\n            <h1 class=\"postcard__title blue\">\n              {/* <a href=\"#\">Podcast Title</a> */}\n            </h1>\n            <div class=\"postcard__subtitle  \">\n              <time datetime=\"2020-05-25 12:00:00 \">\n                <i\n                  class=\"fas fa-calendar-alt my-4 mx-1\n                \"\n                ></i>\n                {new Date(date).toGMTString()}\n              </time>\n            </div>\n            {/* <div class=\"postcard__bar\"></div> */}\n            <div class=\"postcard__preview-txt\">\n              <p>\n                Crop: {crop.cropName} \n              </p>\n              <p>Address: {crop.address}</p>\n              <p> Market:{crop.market}</p>\n\n              <p>\n                Plot No.: {crop.plotno} &emsp; &emsp; Net weight:{crop.weight}\n              </p>\n              {console.log(high)}\n              <p>Highest-bid: {high}</p>\n              <p>Enter Bid Amount:\n              <input\n                type=\"number\"\n                onChange={onChange}\n                className=\" mx-4\"\n                id=\"price\"\n                name=\"price\"\n                value={value}\n                placeholder=\"00\"\n              /></p>\n            </div>\n            <button\n              className=\"btn btn-lg btn-success btn-login fw-bold text-uppercase\"\n              type=\"submit\"\n              onClick={handleClick}\n            >\n              Bid\n            </button>\n          </div>\n        </article>\n      </div>\n    </section>\n  );\n};\n\nexport default BuyCard;\n"]},"metadata":{},"sourceType":"module"}